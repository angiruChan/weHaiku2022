{% extends "haikuapp/base.html" %}
{% load static %}
{% block title %} Manager Options | Haiku Entries {% endblock title %}


{% block custom_css %}
<style>
    .container2{
        padding: 4% 0% 4% 0%;
    }
    .iconSize{
        width: 10px;
    }
    .list-group-item{
        border: 1px solid #bababa;
    }

</style>
{% endblock custom_css %}


{% block content %}
{% include "haikuapp/navigation_bar.html" %}

<div class="w-75 mx-auto container2">
    <div class="d-sm-flex pb-3 justify-content-between">
        <div class="h3">HAIKU ENTRIES</div>
        <!-- Add button -->
        <a class="btn btn-outline-magenta" href="/add_haiku_entries">
            <img src="{% static 'haikuapp/images/plus.png' %}" width="20px" class="align-middle">
            <span style="padding-left: 5px;">Add Entry</span>
        </a>
    </div>

    <!-- Calling all haiku entries -->
    <div class="list-group">
        <ul class="list-group">
            {% for h in haiku %}
            <li class="list-group-item">

                <div class="d-flex w-100 justify-content-between">
                    <div class="mb-1">
                        {% if h.entry_status.entry_status == 'approved' %}
                        <span class="badge bg-pastel-green align-middle small">{{ h.entry_status }}</span>
                        {% elif h.entry_status.entry_status == 'rejected' %}
                        <span class="badge bg-pastel-red align-middle small">{{ h.entry_status }}</span>
                        {% elif h.entry_status.entry_status == 'featured' %}
                        <span class="badge bg-pastel-mint align-middle small">{{ h.entry_status }}</span>
                        {% else %}
                        <span class="badge bg-pastel-purple align-middle small">{{ h.entry_status }}</span>
                        {% endif %}

                    </div>
                    <!-- dropdown menu -->
                    <div class="btn-group" title="more options">
                        <p type="button" class="" data-bs-toggle="dropdown" aria-expanded="false">
                            <img src="{% static 'haikuapp/images/more.png' %}" width="20px"></p>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="/update_haiku_entries/{{ h.encrypt_entry }}">Edit</a>
                            </li>
                            <li><a class="dropdown-item" onclick="confirmDelete('{{ h.encrypt_entry }}')"
                                   type="button">Delete</a></li>
                        </ul>
                    </div>
                </div>

                <h6 class="mb-1 h5">{{ h.haiku_entry }}</h6>
                <div class="small">
                    <span class="h7 fw-bold">Author:</span>
                    <span class="text-secondary">{{ h.author_alias }}</span>
                </div>
                <div class="small">
                    <span class="h7 fw-bold">Email:</span>
                    <span class="text-secondary">{{ h.email }}</span>
                </div>
                <div class="small">
                    <span class="h7 fw-bold">Theme:</span>
                    <span class="text-secondary">{{ h.haiku_theme }}</span>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>


<form action="/delete_haiku_entry/" method="POST">
    {% csrf_token %}
    <input type="hidden" name="confirm_delete" id="confirm_delete">

    <!-- Confirmation Modal -->
    <div id="id01" class="w3-modal customModelCon" style=" z-index: 10;">
        <div class="w3-modal-content w3-animate-top customHeadModal" style="max-width: 400px;">
            <header class="bg-magenta p-4">
                <span class="text-light h5 ">Delete Confirmation</span>
                <button type="button" onclick="exitModal()"
                        class="btn btn-outline-light btn-sm float-end">
                    &times;
                </button>
            </header>

            <div class="p-4 w-100 text-center">
                <img src="{% static 'haikuapp/images/frown-face.png'%}" class="w-25">
                <p>Are you sure you want to delete this entry?</p>
                <div class="col-md-12 pt-3">
                    <button type="submit" class="btn btn-magenta">Delete</button>
                    <button type="button" onclick="exitModal()" class="btn btn-grey">
                        Cancel
                    </button>
                </div>
            </div>
            <footer class="w3-container bg-light p-2"></footer>
        </div>
    </div>
</form>


<script src="{% static 'haikuapp/js/confirm_delete.js' %}" type="text/javascript"></script>
{% endblock %}

